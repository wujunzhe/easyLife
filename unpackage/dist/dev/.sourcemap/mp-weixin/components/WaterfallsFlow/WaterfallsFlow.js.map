{"version":3,"sources":["webpack:////Users/wujunzhe/HBuilderProjects/easyLife/components/WaterfallsFlow/WaterfallsFlow.vue?04e4","webpack:////Users/wujunzhe/HBuilderProjects/easyLife/components/WaterfallsFlow/WaterfallsFlow.vue?9169","webpack:////Users/wujunzhe/HBuilderProjects/easyLife/components/WaterfallsFlow/WaterfallsFlow.vue?897d","webpack:////Users/wujunzhe/HBuilderProjects/easyLife/components/WaterfallsFlow/WaterfallsFlow.vue?a215","uni-app:///components/WaterfallsFlow/WaterfallsFlow.vue","webpack:////Users/wujunzhe/HBuilderProjects/easyLife/components/WaterfallsFlow/WaterfallsFlow.vue?0622"],"names":["renderjs","component","options","__file","components","WaterfallsFlowItem","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;2DAAA,qUACIA,EADJ,wMASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,+CACZ,aAAAF,E;;;;2GCvBf,g1C;;;;2GCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,mBAAoB,WAClB,OAAO,+MAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCjCvB,i6BAA22B,eAAG,G;;;;kZC4B92B,CACE,WAAF,CACI,mBAAJ,GAEE,MAAF,CAEI,OAAJ,CACM,KAAN,MACM,SAAN,GAEI,UAAJ,CACM,KAAN,OACM,QAAN,KAGE,KAfF,WAgBI,MAAJ,CACM,QAAN,GACM,SAAN,GACM,UAAN,GACM,KAAN,EACM,UAAN,KAGE,MAAF,CAEI,OAFJ,aAIA,oBACM,KAAN,2EACQ,KAAR,WACQ,KAAR,YACQ,KAAR,aACQ,KAAR,aACQ,KAAR,QAIA,qBACQ,KAAR,oBACQ,KAAR,cAKI,KArBJ,WAsBM,IAAN,sBACA,4BACQ,KAAR,cAIE,QAAF,CAEI,UAFJ,WAGM,IAAN,YACM,GAAN,MAEQ,KAAR,+BAEQ,KAAR,sBACA,SAEQ,KAAR,gCAEQ,KAAR,qBACA,CAEQ,IAAR,0CACA,EACU,KAAV,gCAEU,KAAV,+BAGQ,KAAR,mBAII,cA3BJ,SA2BA,cACA,mCACA,qBAEM,KAAN,sBACQ,EAAR,0CACU,IAAV,yBACU,EAAV,iBACA,WAKI,QAxCJ,SAwCA,GACM,KAAN,sB;;;;2DCzHA,qnDAAwkD,eAAG,G","file":"components/WaterfallsFlow/WaterfallsFlow.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./WaterfallsFlow.vue?vue&type=template&id=26d87764&scoped=true&\"\nvar renderjs\nimport script from \"./WaterfallsFlow.vue?vue&type=script&lang=js&\"\nexport * from \"./WaterfallsFlow.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WaterfallsFlow.vue?vue&type=style&index=0&id=26d87764&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"26d87764\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/WaterfallsFlow/WaterfallsFlow.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./WaterfallsFlow.vue?vue&type=template&id=26d87764&scoped=true&\"","var components\ntry {\n  components = {\n    WaterfallsFlowItem: function() {\n      return import(\n        /* webpackChunkName: \"components/WaterfallsFlowItem/WaterfallsFlowItem\" */ \"@/components/WaterfallsFlowItem/WaterfallsFlowItem.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./WaterfallsFlow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./WaterfallsFlow.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"wf-page\">\n        <!--    left    -->\n        <view>\n            <view id=\"left\" v-if=\"leftList.length\">\n                <view v-for=\"(item,index) in leftList\" :key=\"index\"\n                      class=\"wf-item\" @tap=\"itemTap(item)\">\n                    <WaterfallsFlowItem :item=\"item\"/>\n                </view>\n            </view>\n        </view>\n\n\n        <!--    right    -->\n        <view>\n            <view id=\"right\" v-if=\"rightList.length\">\n                <view v-for=\"(item,index) in rightList\" :key=\"index\"\n                      class=\"wf-item\" @tap=\"itemTap(item)\">\n                    <WaterfallsFlowItem :item=\"item\"/>\n                </view>\n            </view>\n        </view>\n    </view>\n</template>\n\n<script>\nimport WaterfallsFlowItem from '../WaterfallsFlowItem/WaterfallsFlowItem.vue'\n\nexport default {\n    components: {\n        WaterfallsFlowItem\n    },\n    props: {\n        // 瀑布流列表\n        wfList: {\n            type: Array,\n            require: true\n        },\n        updateNum: {\n            type: Number,\n            default: 10\n        }\n    },\n    data() {\n        return {\n            allList: [],       // 全部列表\n            leftList: [],      // 左边列表\n            rightList: [],     // 右边列表\n            mark: 0,           // 列表标记\n            boxHeight: [],     // 下标0和1分别为左列和右列高度\n        };\n    },\n    watch: {\n        // 监听列表数据变化\n        wfList() {\n            // 如果数据为空或新的列表数据少于旧的列表数据（通常为下拉刷新或切换排序或使用筛选器），初始化变量\n            if (!this.wfList.length ||\n                (this.wfList.length === this.updateNum && this.wfList.length <= this.allList.length)) {\n                this.allList = [];\n                this.leftList = [];\n                this.rightList = [];\n                this.boxHeight = [];\n                this.mark = 0;\n            }\n\n            // 如果列表有值，调用waterfall方法\n            if (this.wfList.length) {\n                this.allList = this.wfList;\n                this.waterFall()\n            }\n        },\n\n        // 监听标记，当标记发生变化，则执行下一个item排序\n        mark() {\n            const len = this.allList.length;\n            if (this.mark < len && this.mark !== 0) {\n                this.waterFall();\n            }\n        }\n    },\n    methods: {\n        // 瀑布流排序\n        waterFall() {\n            const i = this.mark;\n            if (i === 0) {\n                // 初始化，从左边开始插入\n                this.leftList.push(this.allList[i]);\n                // 更新左边列表高度\n                this.getViewHeight(0);\n            } else if (i === 1) {\n                // 第二个item插入，默认为右边插入\n                this.rightList.push(this.allList[i]);\n                // 更新右边列表高度\n                this.getViewHeight(1);\n            } else {\n                // 根据左右列表高度判断下一个item应该插入哪边\n                const leftOrRight = this.boxHeight[0] > this.boxHeight[1] ? 1 : 0;\n                if (leftOrRight) {\n                    this.rightList.push(this.allList[i])\n                } else {\n                    this.leftList.push(this.allList[i])\n                }\n                // 更新插入列表高度\n                this.getViewHeight(leftOrRight);\n            }\n        },\n        // 获取列表高度\n        getViewHeight(leftOrRight) {\n            const query = uni.createSelectorQuery().in(this);\n            const id = leftOrRight ? '#right' : '#left';\n            // 使用nextTick，确保页面更新结束后，再请求高度\n            this.$nextTick(() => {\n                query.select(id).boundingClientRect(res => {\n                    res ? this.boxHeight[leftOrRight] = res.height : '';\n                    this.mark = this.mark + 1;\n                }).exec();\n            })\n        },\n\n        // item点击\n        itemTap(item) {\n            this.$emit('itemTap', item)\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n$page-padding: 10px;\n$grid-gap: 10px;\n\n.wf-page {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: $grid-gap;\n    padding: 10px $page-padding;\n}\n\n.wf-item {\n    width: calc((100vw - 2 * #{$page-padding} - #{$grid-gap}) / 2);\n    padding-bottom: $grid-gap;\n}\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./WaterfallsFlow.vue?vue&type=style&index=0&id=26d87764&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./WaterfallsFlow.vue?vue&type=style&index=0&id=26d87764&lang=scss&scoped=true&\""],"sourceRoot":""}